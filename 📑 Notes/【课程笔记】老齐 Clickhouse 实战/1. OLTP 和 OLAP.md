## 数据库的演化历史

- **单机模式**：数据库部署在单一机器上。
	- 大流量的场景下查询慢。
	- 单机故障会导致业务不可用。
- **主从模式**：分为主库和从库，读写分离，可以分离部署在不同机器上。
	- 主库写，从库读。主库向从库进行同步。适合写少读多的场景。
	- 从库可以水平扩展，满足更大的读需求。
- **双主/多主模式**：多个主库，每一台服务器都可以进行读写操作。
	- 适合写入频繁的场景。
	- 多台机器同时写入可能导致数据写入冲突，需要考虑互斥和数据一致性。技术实现复杂。
- **分库分表模式**：业务层面进行分割，拆分成不同的数据库，再由业务的性质来考虑架构采用双主还是一主多从的模式。

常见的数据库如MySQL，能够应对的是存在局部性的查询，例如最近一段时间的数据查询。而在一些数据分析的场景下，往往是需要进行全盘扫描性的统计业务，尤其是在大数据量的场景下（例如TB/PB级别）会导致常见的关系型数据库不堪重负。
因此为了面对这种大规模全盘扫描的业务查询场景，我们将数据库分为 OLTP 和 OLAP。

**OLTP（Online Transaction Processing）**：联机事务处理系统，对数据进行增删改查等操作。
- 存储的是业务数据，记录某类业务事件的发生，例如下单、支付、注册等。
- 可能需要事件粒度的回滚，一步失败整体失败。
- 用于支撑实时性的业务逻辑，对响应时间要求较高，面向前台应用，应用比较简单，数据量要求通常相对较小（例如仅需要最近某个很短的时间段的数据即可）。
但是，如果数据累积到了一定程度，可能需要全面复盘或者分析，把过去全量数据拿出来统计，这就需要OLAP 了。

**OLAP（Online Analytical Processing）**：联机分析处理系统，对数据进行全面分析操作。
- 存储的往往是历史数据，数据量往往非常大。
- OLAP是[[数据仓库]]系统的主要应用，需要支持复杂的分析操作，侧重决策，并应提供直观易懂的查询结果。
- 典型代表：Hive、ClickHouse

